## 1. 场景体素化
早期实现采用稀疏八叉树在GPU上存储场景，但GPU上查询稀疏八叉树的效率比较低，更高效的方案是采用三维纹理存储。

先过一遍片元着色器，在三维纹理中存储漫反射颜色、法线和自发光信息。

然后从光源生成一张阴影贴图。使用compute shader从深度图重建各受光像素的世界坐标后，再转换到体素坐标中。根据受光信息以及三维纹理中的漫反射颜色、法线和位置信息，可以计算出体素的漫反射光照，将其存储到辐射度纹理中。

为了进行锥形追踪（cone tracing），需要将体素mipmap化。各向异性的体素存储了随方向变化的体素颜色。具体而言，从上一级纹理中获取相邻的8个颜色值，并沿着正负XYZ方向积分得到。