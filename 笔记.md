# Ray Tracing Gems || 学习笔记

## 1.从摄影到光追

摄影是一项以物理光学和电磁学为基础的技术。当我们讨论光线追踪的渲染技术时，我们实际上就是在模拟一个真实的物理相机摄像的过程，因此，了解摄影技术和摄影词汇有利于加深对光追的学习。

* **摄影技术**：通过捕获光子来描述事物或表达思想。
* **摄影机**：一种捕获光子的设备，可以将光子信息存入存储媒介中以供查看。
* **光电探测器**：一种无源电子元件，可以将光子信息转换为电流信号；光电探测器的相应曲线通常是非线性的，这一点和光敏二极管类似。
* **图素**：一个光电探测器（感光点）或者一个像素。
* **传感器**：一个对齐笛卡尔坐标系的图素平面；传感器负责采样光子信息并且将产生的电流信号数字化。
* **传感器模块**：一种电气模块，包含数字传感器和所有相关的滤光片。每一种传感器模块都有一个唯一的传递函数，这是由各种各样的因素导致的，在模拟中一般不需要对传感器进行完全建模。如果真的需要对一种特定的传感器模块进行模拟，通常采取的策略是直接对传感器进行采样建模，获得一张类似光学光谱灵敏度的图片。

- **像素间距**：相邻的两个像素中心的物理距离，通常以微米（$$10^{-6}$$米）为单位。

- **红外/紫外线滤光片**：一种放在传感器前面的滤光片，用以吸收红外线和紫外线；虽然不同光电探测器之间的差距可能非常大，但大部分相机的光电探测器都对可见光波段以外的波长很敏感。使用红外/紫外线滤光片可以更好地模拟人眼的感光效果。

- **黑白传感器模块**：使用红外/紫外线滤光片的图素网格，每一个图素都捕获了所有进入其中的可见光波段的光子；黑白传感器模块仅捕获光子的亮度信息，不包含颜色信息。

- **颜色传感器**：由黑白传感器模块增加一块彩色马赛克滤光片组成。马赛克滤光片由多个彩色滤光片图案重复排列形成，每个彩色滤光片图案都覆盖一个独立像素。彩色滤光片一般由红、绿、蓝、透明组成，红色滤光片模拟人眼的红视锥（L型视锥细胞，Long Cone），绿色滤光片模拟人眼的绿视锥（M型视锥细胞，Middle Cone），蓝色滤光片模拟人眼的蓝视锥（S型视锥细胞，Short Cone）。颜色传感器可以近似地将透过马赛克图案的亮度和颜色信息转变为RGB信息。

- **Bayer图案**：最常使用的马赛克图案，由两绿一红一蓝组成。Bayer图案可以捕获约45%的亮度信息和约29%的颜色信息。

- **去马赛克**：一种近似完整RGB颜色信息的信号处理算法。不同的马赛克图案对应不同的算法。去马赛克之前，传感器中的每个像素只有单一的颜色或亮度值，而完整RGB颜色信息则是要求每个像素都具备RGB三个值。

- **Foveon传感器**：一种通过半导体中垂直堆叠三个光敏二极管组成的传感器，可以免去对马赛克图案的依赖而获得完整的RGB颜色信息。

- **走样（Aliasing）**：信号采集和还原的过程中产生的失真或瑕疵。这种问题常出现在具有高频信息的地方。

- **抗走样滤光片**：一种位于传感器之前用于减少走样问题的滤光片。实际上是一种光学模糊元件，可以减少传递到传感器的高频信息（低通滤镜），对消除摩尔纹尤其有效。

- **摩尔纹**：一种视觉走样效果，当图素的空间频率与高频信息接近时产生的干扰图案。

- **胶片**：一种光子捕获和存储媒介，通常是一种具有光敏化学材料涂层的塑料片。

- **阴片**：胶片的存储媒介，具有光反特性，即增加光子数量会使得底片变暗。底片的输出内容实际上是反转的亮度和颜色信息。

- **阳片**：具备光正特性的胶片，输出内容是正常的亮度和颜色信息。

- **35mm胶片**：宽度为35毫米的胶片，是20世纪最常使用的胶片。

- **65mm胶片**：宽度为70毫米的胶片。因为一些历史原因，70毫米胶片有时候会标注为65毫米胶片，但实际上所谓的“65毫米胶片”没有任何维度上是65毫米。

- **Aspect Ratio**：（画幅）宽高比，宽度与高度的比值。对胶片来说，是指感光区域的宽高比；对数字传感器来说，是指水平方向像素数量和垂直方向像素数量的比值。

- **35mm摄影胶片**：宽为36毫米，高为24毫米，宽高比为3:2的胶片。

- **35mm电影胶片**：由于电影胶片在水平方向的边缘有音频带，所以35mm电影胶卷的实际画面相当于宽为22毫米，高为16毫米，宽高比为1.375:1的胶片。

- **35mm传感器**：全画幅传感器，模拟35mm摄影胶片感光效果的数字传感器，为一块尺寸为36mm\*24mm的传感器。

- **APS-C**：APS-C画幅，感光面积约为全画幅的一半，传感器尺寸约为23.4mm\*15.6mm。

- **4/3传感器**：感光面积约为全画幅的1/4，传感器尺寸约为17.3mm\*13mm，宽高比为4:3。但4/3不是由于它的画幅比为4:3，而是指感光原件规格等效于过去的4/3英寸直径摄像管。

- **Super 35mm**：模拟35毫米电影胶片的感光效果；传感器尺寸为24.89mm\*18.66mm，宽高比为1.33:1。

- **中画幅**：指比35毫米摄影胶片感光面积更大，但是比大画幅感光面积小的画幅。具体来说是指感光面积在36mm\*24mm到130mm\*100mm之间的画幅（对画幅比没有规定）。

- **大画幅（摄影）**：指感光面积大于130mm\*100mm的画幅。

- **大画幅（电影）**：指感光面积大于Super 35mm的画幅。

- **DCI-2K**：像素分辨率为2048\*1080

- **DCI-4K**：像素分辨率为4096\*2160

- **DCI-8K**：像素分辨率为8192\*4320

- **High-Definition（高清）**：像素分辨率为1920\*1080

- **Ultra-High-Definition（超清）**：像素分辨率为3840\*2160

- **8K**：像素分辨率为7680\*4320

- **透镜化**：一种将水平光线汇聚到一点的数学运算，通常用薄透镜模型描述。

- **焦点**：透镜化过程中光线汇聚的点。

- **摄影镜头**：一套由光学元件构成的物理组件，用于将进入的光子汇聚到感光区域前的焦点上。

- **视场**：通过镜头汇聚到焦点上的可见范围，通常用立体角表示。当画幅确定时，视场大小和焦距可以相互求得。

- **水平视场**：描述视场在水平方向的最大开角。

- **垂直视场**：描述视场在垂直方向的最大开角。

- **针孔相机**：是一个黑盒结构，选出其中一个面开一个小孔，相对的面作为感光区域。其中的小孔就是针孔相机的焦点（区域）。理想针孔相机的小孔是非常小的，几乎没有离焦模糊，但这样也会使得进光量很少。

- **焦距**：焦点到相交平面的距离，相交平面是指汇聚线反向延长线与平行光线相交的平面。

- **焦距、视场与画幅大小的关系**：

  $$h_{fov}=2arctan(\frac{画幅宽度}{2\times焦距})\qquad v_{fov}=2arctan(\frac{画幅高度}{2\times焦距})$$

- **光圈（虹膜）**：摄影机镜头上的开口，是光子进入感光区域的唯一入口。可更换镜头的光圈一般也是可以调节的。较大的光圈可以提高进光量，但也会产生更大的弥散圈；较小的光圈减少了进光量，但可以缩小弥散圈。摄影圈一般使用“光圈（aperture）”这个词，影视制作一般使用“虹膜（iris）”这个词，它们其实是相同的概念。

- **弥散圈**：由前后相邻的光锥堆积产生的光学模糊现象。弥散圈的半径大小与光圈大小直接相关。

- **焦平面**：过焦点，与透镜中轴线垂直的理想平面。处于焦平面的物体会在传感器上得到最清晰的成像。

- **离焦模糊**：由弥散圈引起的模糊现象。处于焦平面之外的物体会显得模糊。

- **景深**：近焦平面与远焦平面的距离。处于这两个平面内的物体会显得清晰，不处于这两个平面内的物体会出现离焦模糊。

  ![](笔记材料\景深.jpeg)

- **STOP**：级数，每一级stop都是将数值翻倍，$$1 stop就是2\times，2 stops就是4\times，3 stops就是8\times...$$

- 

