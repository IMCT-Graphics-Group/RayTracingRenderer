## 1. 概览

整体上，DXR的硬件光追遵循：
Ray Generation Shader ---> 调度1 ---> 加速结构求交 ---> 调度2 ---> 着色 ---> 调度1

其中，两部分调度过程都是不透明的，由硬件厂商把控；从API的角度来看，调度是一个完全的内置过程。

剩余的过程中，最主要的固定函数过程便是遍历加速结构求交。

可编程着色器过程则包括：
- 光线生成
- 确定隐式几何的交点（与固定函数过程的三角形交点不同）
- 处理光线命中和未命中

**光线生成着色器**：`DispatchRays()`将调用一组光线生成着色器，每个着色器都有其相应的编号和位置信息，且可以通过`TraceRay()`生成任意数量的光线。

**光线描述**：DXR中的光线描述是由原点、方向和区间参数（TMin, TMax）构成。光线的交点则通过参数化表示，即`origin + T*direction`（需要注意的是，direction不一定是归一化的）。每根光线还带有一个由用户定义的伴随结构（payload），当光线与场景几何体相交时可以修改该结构，且可以作为返回结果对`TraceRay()`调用者可见。但payload在内联光追中不是显式实体。

**最近交点**：在光线的整个生命周期中，TMin值是恒定不变的，但是TMax值会被逐渐缩小用以确定最近交点。